import { BehaviorSubject } from 'rxjs';
export class HistoryMoveProvider {
    constructor() {
        this.historyMovesSubject$ = new BehaviorSubject([]);
    }
    get historyMoves() {
        return this.historyMovesSubject$.value;
    }
    set historyMoves(states) {
        this.historyMovesSubject$.next(states);
    }
    addMove(historyMove) {
        this.historyMoves = [...this.historyMoves, historyMove];
    }
    pop() {
        const lastHistoryMove = this.getLastMove();
        this.historyMoves = this.historyMoves.filter((state) => state !== lastHistoryMove);
        return lastHistoryMove;
    }
    getAll() {
        return this.historyMoves;
    }
    clear() {
        this.historyMoves = [];
    }
    getLastMove() {
        return this.historyMoves[this.getLastMoveIndex()];
    }
    getLastMoveIndex() {
        return this.historyMoves.length - 1;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlzdG9yeS1tb3ZlLXByb3ZpZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LWNoZXNzLWJvYXJkL3NyYy9saWIvaGlzdG9yeS1tb3ZlLXByb3ZpZGVyL2hpc3RvcnktbW92ZS1wcm92aWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBR3ZDLE1BQU0sT0FBTyxtQkFBbUI7SUFBaEM7UUFDSSx5QkFBb0IsR0FBRyxJQUFJLGVBQWUsQ0FBZ0IsRUFBRSxDQUFDLENBQUM7SUFxQ2xFLENBQUM7SUFuQ0csSUFBSSxZQUFZO1FBQ1osT0FBTyxJQUFJLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDO0lBQzNDLENBQUM7SUFFRCxJQUFJLFlBQVksQ0FBQyxNQUFxQjtRQUNsQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFRCxPQUFPLENBQUMsV0FBd0I7UUFDNUIsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxXQUFXLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBRUQsR0FBRztRQUNDLE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUMzQyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUN4QyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLGVBQWUsQ0FDdkMsQ0FBQztRQUNGLE9BQU8sZUFBZSxDQUFDO0lBQzNCLENBQUM7SUFFRCxNQUFNO1FBQ0YsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzdCLENBQUM7SUFFRCxLQUFLO1FBQ0QsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUM7SUFDM0IsQ0FBQztJQUVELFdBQVc7UUFDUCxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBRUQsZ0JBQWdCO1FBQ1osT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDeEMsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBIaXN0b3J5TW92ZSB9IGZyb20gJy4vaGlzdG9yeS1tb3ZlJztcblxuZXhwb3J0IGNsYXNzIEhpc3RvcnlNb3ZlUHJvdmlkZXIge1xuICAgIGhpc3RvcnlNb3Zlc1N1YmplY3QkID0gbmV3IEJlaGF2aW9yU3ViamVjdDxIaXN0b3J5TW92ZVtdPihbXSk7XG5cbiAgICBnZXQgaGlzdG9yeU1vdmVzKCk6IEhpc3RvcnlNb3ZlW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5oaXN0b3J5TW92ZXNTdWJqZWN0JC52YWx1ZTtcbiAgICB9XG5cbiAgICBzZXQgaGlzdG9yeU1vdmVzKHN0YXRlczogSGlzdG9yeU1vdmVbXSkge1xuICAgICAgICB0aGlzLmhpc3RvcnlNb3Zlc1N1YmplY3QkLm5leHQoc3RhdGVzKTtcbiAgICB9XG5cbiAgICBhZGRNb3ZlKGhpc3RvcnlNb3ZlOiBIaXN0b3J5TW92ZSkge1xuICAgICAgICB0aGlzLmhpc3RvcnlNb3ZlcyA9IFsuLi50aGlzLmhpc3RvcnlNb3ZlcywgaGlzdG9yeU1vdmVdO1xuICAgIH1cblxuICAgIHBvcCgpOiBIaXN0b3J5TW92ZSB7XG4gICAgICAgIGNvbnN0IGxhc3RIaXN0b3J5TW92ZSA9IHRoaXMuZ2V0TGFzdE1vdmUoKTtcbiAgICAgICAgdGhpcy5oaXN0b3J5TW92ZXMgPSB0aGlzLmhpc3RvcnlNb3Zlcy5maWx0ZXIoXG4gICAgICAgICAgICAoc3RhdGUpID0+IHN0YXRlICE9PSBsYXN0SGlzdG9yeU1vdmVcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGxhc3RIaXN0b3J5TW92ZTtcbiAgICB9XG5cbiAgICBnZXRBbGwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpc3RvcnlNb3ZlcztcbiAgICB9XG5cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5TW92ZXMgPSBbXTtcbiAgICB9XG5cbiAgICBnZXRMYXN0TW92ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlzdG9yeU1vdmVzW3RoaXMuZ2V0TGFzdE1vdmVJbmRleCgpXTtcbiAgICB9XG5cbiAgICBnZXRMYXN0TW92ZUluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaXN0b3J5TW92ZXMubGVuZ3RoIC0gMTtcbiAgICB9XG59XG4iXX0=